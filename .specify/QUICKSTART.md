# Speckit 快速入门指南

欢迎使用 Novel RAG Spec Kit！本指南将帮助你快速上手。

## 5分钟快速入门

### 步骤 1: 了解宪章

阅读项目宪章以了解核心原则：

```bash
# 查看宪章
cat .specify/memory/constitution.md
```

**核心原则：**
- ✅ 代码质量卓越
- ✅ 全面测试标准
- ✅ 用户体验一致性
- ✅ 性能要求

### 步骤 2: 创建你的第一个计划

假设你要开发一个用户认证功能：

```bash
/speckit.plan 创建用户认证功能，包括登录、注册、密码重置，需要支持邮箱和社交登录
```

这将创建 `.specify/plans/user-authentication-plan.md`，包含：
- 宪章合规检查 ✅
- 战略目标和成功指标
- 高层架构设计
- 测试策略
- 性能目标
- 风险和时间线

### 步骤 3: 编写详细规范

基于计划，编写详细的技术规范：

```bash
/speckit.spec 用户认证功能的详细规范，包括API设计、数据模型、安全要求
```

这将创建 `.specify/specs/user-authentication-spec.md`，包含：
- 详细功能需求和验收标准
- 非功能需求（性能、安全、可访问性）
- 完整的API设计
- 数据库模型
- 全面的测试要求

### 步骤 4: 分解为任务

将规范分解为可执行的任务：

```bash
/speckit.tasks 将用户认证规范分解为开发任务
```

这将创建 `.specify/tasks/user-authentication-tasks.md`，包含：
- 分类的任务列表（开发、测试、设计、文档）
- 每个任务的宪章合规检查
- 依赖关系和优先级
- 预估时间和负责人

### 步骤 5: 开始实施

根据任务文档开始编码：

```bash
# 选择一个任务
# 编写代码
# 编写测试（覆盖率 ≥ 80%）
# 运行 Linter
# 提交代码审查
```

## 宪章合规检查清单

在每个阶段，确保遵循宪章：

### 编码时
- [ ] 遵循编码标准（Linter 通过）
- [ ] 圈复杂度 ≤ 10
- [ ] 包含单元测试（覆盖率 ≥ 80%）
- [ ] 添加完整的代码注释/文档
- [ ] 无未使用的导入和死代码

### 测试时
- [ ] 单元测试覆盖率 ≥ 80%
- [ ] 关键逻辑覆盖率 = 100%
- [ ] 包含集成测试
- [ ] 测试独立且可重复
- [ ] 测试执行快速（单元测试 < 100ms）

### UI/UX时
- [ ] 使用设计系统组件
- [ ] 响应式设计（移动/平板/桌面）
- [ ] WCAG 2.1 AA 合规
- [ ] 键盘导航支持
- [ ] 颜色对比度 ≥ 4.5:1

### 性能时
- [ ] FCP < 1.5s, LCP < 2.5s
- [ ] FID < 100ms, CLS < 0.1
- [ ] API p95 < 500ms
- [ ] 数据库查询使用索引
- [ ] 资源优化（压缩、懒加载）

### 代码审查时
- [ ] 代码遵循标准
- [ ] 测试充分
- [ ] 性能影响已评估
- [ ] 可访问性已考虑
- [ ] 文档已更新

## 常用命令

### 文档管理
```bash
# 查看宪章
cat .specify/memory/constitution.md

# 更新宪章
/speckit.constitution 添加新的性能监控原则

# 创建计划
/speckit.plan [功能描述]

# 创建规范
/speckit.spec [详细需求]

# 创建任务
/speckit.tasks [基于规范]
```

### 开发工作流
```bash
# 代码检查
npm run lint

# 运行测试
npm test

# 测试覆盖率
npm run test:coverage

# 性能分析
npm run perf

# 可访问性审计
npm run a11y
```

## 工作流程图

```
┌─────────────────────────────────────────────────────────────┐
│                     制定宪章 (一次性)                        │
│                   .specify/memory/constitution.md            │
└──────────────────────────┬──────────────────────────────────┘
                           │
                           ↓
┌─────────────────────────────────────────────────────────────┐
│                  创建计划 (每个功能)                          │
│                  .specify/plans/[name]-plan.md               │
│  • 宪章合规检查 • 目标 • 架构 • 风险 • 时间线                 │
└──────────────────────────┬──────────────────────────────────┘
                           │
                           ↓
┌─────────────────────────────────────────────────────────────┐
│                  编写规范 (详细设计)                          │
│                  .specify/specs/[name]-spec.md               │
│  • 需求 • API • 数据模型 • 测试 • 性能 • 可访问性             │
└──────────────────────────┬──────────────────────────────────┘
                           │
                           ↓
┌─────────────────────────────────────────────────────────────┐
│                  分解任务 (可执行)                            │
│                  .specify/tasks/[name]-tasks.md              │
│  • 开发任务 • 测试任务 • 设计任务 • 文档任务                  │
└──────────────────────────┬──────────────────────────────────┘
                           │
                           ↓
┌─────────────────────────────────────────────────────────────┐
│                      实施执行                                 │
│  编码 → 测试 → 代码审查 → 合并 → 部署                         │
└─────────────────────────────────────────────────────────────┘
```

## 示例项目

### 示例 1: 简单功能（用户头像上传）

```bash
# 1. 创建简化规范（小功能可跳过计划）
/speckit.spec 用户头像上传功能，支持裁剪和预览

# 2. 分解任务
/speckit.tasks 将头像上传功能分解为任务

# 3. 实施
# - 前端组件（1天）
# - API端点（0.5天）
# - 图片处理（0.5天）
# - 测试（0.5天）
# - 代码审查（0.5天）
```

### 示例 2: 复杂功能（实时通知系统）

```bash
# 1. 创建计划
/speckit.plan 实时通知系统，支持WebSocket、推送通知、通知中心

# 2. 创建规范
/speckit.spec 实时通知系统详细规范，包括架构、协议、数据模型

# 3. 分解任务
/speckit.tasks 将通知系统分解为多个Sprint的任务

# 4. 分阶段实施
# Phase 1: WebSocket基础设施（1周）
# Phase 2: 通知中心UI（1周）
# Phase 3: 推送通知集成（1周）
# Phase 4: 性能优化和测试（1周）
```

## 故障排除

### Q: 我可以跳过规范直接编码吗？

A: 对于非常小的变更（如样式调整、文案修改）可以，但任何涉及逻辑的功能都应该至少有简化的规范。这能避免返工。

### Q: 测试覆盖率达不到80%怎么办？

A: 
1. 检查是否有未测试的关键逻辑
2. 识别难以测试的代码，考虑重构
3. 如果确实有无法测试的部分（如硬件交互），记录例外

### Q: 性能目标达不到怎么办？

A: 
1. 使用性能分析工具找到瓶颈
2. 优化关键路径
3. 考虑缓存、懒加载、代码分割
4. 如果硬件限制，与团队讨论调整目标

### Q: 如何处理紧急Bug修复？

A: 紧急Bug修复可以简化流程，但仍需：
1. 记录Bug和根本原因
2. 编写失败测试
3. 修复并通过测试
4. 代码审查（可加急）
5. 事后补充文档

## 获取帮助

- 📖 阅读 [完整宪章](.specify/memory/constitution.md)
- 📋 查看 [模板说明](.specify/templates/README.md)
- 📚 阅读 [主 README](../README.md)
- 💬 与团队讨论最佳实践

---

**记住：Speckit 不是为了制造官僚主义，而是为了确保质量、一致性和长期可维护性。一开始可能感觉繁琐，但会越来越顺手！** 🚀

现在，开始你的第一个规范吧！ 🎉

