# ==================== LLM提供商API密钥配置 ====================

# 智谱AI配置（必需，用于embedding和默认LLM）
# 获取地址：https://open.bigmodel.cn/usercenter/apikeys
ZHIPU_API_KEY=your_zhipuai_api_key_here
ZHIPU_DEFAULT_MODEL=GLM-4.5-Air

# OpenAI配置（可选）
# 获取地址：https://platform.openai.com/api-keys
OPENAI_API_KEY=
OPENAI_BASE_URL=https://api.openai.com/v1

# DeepSeek配置（可选）
# 获取地址：https://platform.deepseek.com/api_keys
DEEPSEEK_API_KEY=
DEEPSEEK_BASE_URL=https://api.deepseek.com

# Gemini配置（可选）
# 获取地址：https://makersuite.google.com/app/apikey
GEMINI_API_KEY=

# 阿里通义千问配置（可选）
# 获取地址：https://dashscope.console.aliyun.com/apiKey
ALI_API_KEY=
ALI_BASE_URL=https://dashscope.aliyuncs.com/api/v1

# 默认LLM提供商（zhipu/openai/deepseek/gemini/ali）
DEFAULT_LLM_PROVIDER=zhipu

# ==================== 应用基础配置 ====================

# 应用信息
APP_NAME=网络小说智能问答系统
APP_VERSION=0.1.0
DEBUG=True

# 服务器配置
HOST=0.0.0.0
PORT=8000

# 数据库配置
DATABASE_URL=sqlite:///./data/sqlite/metadata.db

# ChromaDB配置
CHROMADB_PATH=./data/chromadb

# 文件存储配置
DATA_DIR=./data
UPLOAD_DIR=./data/uploads
GRAPH_DIR=./data/graphs

# 日志配置
LOG_LEVEL=INFO
LOG_FILE=./logs/app.log

# CORS配置
ALLOWED_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000", "http://localhost:3001", "http://127.0.0.1:3001"]

# ==================== RAG配置 ====================

# Token限制
MAX_TOKENS_PER_QUERY=8000
MAX_CONTEXT_CHUNKS=10

# 文本分块配置
CHUNK_SIZE=550
CHUNK_OVERLAP=125

# 检索配置
TOP_K_RETRIEVAL=30
TOP_K_RERANK=10
MIN_SIMILARITY_THRESHOLD=1.2
RECENCY_BIAS_WEIGHT=0.15

# Embedding配置
EMBEDDING_MODEL=embedding-3
EMBEDDING_DIMENSION=2048

# ==================== 图谱构建配置 ====================

# Batch API配置（智谱AI）
USE_BATCH_API_FOR_GRAPH=True
USE_BATCH_API_FOR_EMBEDDING=True
BATCH_API_THRESHOLD=20

# 并发控制配置
GRAPH_ATTRIBUTE_CONCURRENCY=2
GRAPH_RELATION_CONCURRENCY=2
EMBEDDING_BATCH_SIZE=20

# ==================== 使用说明 ====================
# 1. 将此文件复制为 backend/.env
# 2. 至少配置 ZHIPU_API_KEY（必需）
# 3. 可选配置其他提供商的API密钥
# 4. 重启后端服务使配置生效

